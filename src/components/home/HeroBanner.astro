---
import WorldCupCountdown from "./WorldCupCountdown.tsx";
import heroImg from "../../assets/hero/worldcup-hero.png";
---

<section class="hero-parallax">
  <!-- Fondo -->
  <div class="hero-bg">
    <img
      src={heroImg.src}
      alt="FIFA World Cup 2026 hero"
      loading="eager"
      decoding="async"
      class="hero-bg-img"
    />
    <div class="hero-vignette"></div>
    <div class="hero-sheen"></div>
    <div class="hero-noise"></div>
  </div>

  <!-- Contenido -->
  <div class="hero-inner">
    <div class="hero-content">
      <section class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div>
          <h1 class="text-5xl md:text-6xl font-extrabold text-white drop-shadow-lg">
            MUNDIAL 2026
          </h1>
          <p class="mt-3 text-slate-300 max-w-xl">
            Haz tus predicciones de grupos, llaves, campeón y goleadores. Compite con tus
            amigos durante todo el Mundial.
          </p>
          <div class="mt-5 flex gap-3">
            <a
              href="/grupos"
              class="px-4 py-2 rounded-lg bg-yellow-400 text-slate-900 font-semibold text-sm"
            >
              Empezar predicciones
            </a>
            <a
              href="/ranking"
              class="px-4 py-2 rounded-lg border border-slate-500 text-sm text-slate-100"
            >
              Ver ranking
            </a>
          </div>
        </div>

        <WorldCupCountdown client:load />
      </section>
    </div>
  </div>

  <script is:inline>
    // Parallax suave basado en scroll
    const root = document.currentScript?.closest(".hero-parallax");
    if (root) {
      const img = root.querySelector(".hero-bg-img");
      const tick = () => {
        const rect = root.getBoundingClientRect();
        const vh = window.innerHeight || 1;
        const progress = Math.min(1, Math.max(0, 1 - rect.top / vh));
        // Ajusta intensidades aquí
        const y = progress * 28;      // desplazamiento vertical
        const s = 1.02 + progress * 0.06; // zoom leve
        if (img) img.style.transform = `translate3d(0, ${y}px, 0) scale(${s})`;
        requestAnimationFrame(tick);
      };
      requestAnimationFrame(tick);
    }
  </script>

  <style>
    .hero-parallax{
      position: relative;
      min-height: 520px;
      display: grid;
      align-items: center;
      overflow: hidden;
      border-bottom: 1px solid rgba(148,163,184,.2);
    }

    /* Fondo */
    .hero-bg{
      position: absolute;
      inset: 0;
      z-index: 0;
    }
    .hero-bg-img{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: translate3d(0,0,0) scale(1.04);
      will-change: transform;
      filter: saturate(1.08) contrast(1.05);
    }

    /* Oscurece bordes + mejora legibilidad */
    .hero-vignette{
      position:absolute; inset:0;
      background:
        radial-gradient(1200px 520px at 40% 40%, rgba(2,6,23,.30), rgba(2,6,23,.80) 70%),
        linear-gradient(to bottom, rgba(2,6,23,.55), rgba(2,6,23,.85));
      z-index: 1;
    }

    /* Brillo plateado retroiluminado (estético) */
    .hero-sheen{
      position:absolute; inset:-20%;
      background: radial-gradient(closest-side at 30% 30%, rgba(226,232,240,.16), rgba(226,232,240,0));
      mix-blend-mode: screen;
      z-index: 2;
      transform: rotate(-8deg);
      pointer-events: none;
    }

    /* Ruido suave para look “cinematic/retro” */
    .hero-noise{
      position:absolute; inset:0;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.14'/%3E%3C/svg%3E");
      opacity: .18;
      z-index: 3;
      pointer-events:none;
    }

    /* Contenedor */
    .hero-inner{
      position: relative;
      z-index: 10;
      width: 100%;
    }
    .hero-content{
      max-width: 72rem; /* similar a max-w-6xl */
      margin: 0 auto;
      padding: 5rem 1rem 3rem;
    }

    @media (min-width: 768px){
      .hero-parallax{ min-height: 600px; }
      .hero-content{ padding: 6rem 1rem 3.5rem; }
    }
  </style>
</section>
